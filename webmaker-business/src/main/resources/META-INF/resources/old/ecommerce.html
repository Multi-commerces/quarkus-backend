<!doctype html>
<html class="no-js" lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Foundation | Welcome</title>
<link rel="stylesheet"
	href="https://dhbhdrzi4tiry.cloudfront.net/cdn/sites/foundation.min.css">
	
<style type="text/css">
.product figure
{
	margin: 0;
}

.product figure figcaption
{
    font-size: small;
}

</style>

</head>
<body>

	<!-- Start Top Bar -->
	<nav class="top-bar topbar-responsive">
  <div class="top-bar-title">
    <span data-responsive-toggle="topbar-responsive" data-hide-for="medium">
      <button class="menu-icon" type="button" data-toggle></button>
    </span>
    <a class="topbar-responsive-logo" href="#"><strong>Site Title</strong></a>
  </div>
  <div id="topbar-responsive" class="topbar-responsive-links">
    <div class="top-bar-right">
      <ul class="menu simple vertical medium-horizontal">
        <li><a href="#">Home</a></li>
        <li><a href="#">About</a></li>
        <li><a href="#">Services</a></li>
        <li><a href="#">Works</a></li>
        <li><a href="#">News</a></li>
        <li><a href="#">Contact</a></li>
        <li>
          <button type="button" class="button hollow topbar-responsive-button">Categories</button>
        </li>
      </ul>
    </div>
  </div>
</nav>

	<div id="err" class="callout alert" style="display:none">
	  <h5>Call. error</h5>
	   <p class="message"></p>
	</div>
	<div id="suc" class="callout success"  style="display:none">
	  <h5>Call. success</h5>
	  <p class="message"></p>
	</div>



	<!-- End Top Bar -->
	<div class="row column text-center">
		<h2>Nos produits les plus récents</h2>
		<hr>
	</div>

	<div id="300_400" class="row small-up-2 large-up-4">
		<!-- javascript insertion -->
	</div>

	<hr>

	<div class="row column">
		<div class="callout primary">
			<h3>Vraiment grande spéciale cette semaine sur les articles</h3>
		</div>
	</div>

	<hr>

	<div class="row column text-center">
		<h2>Quelques autres produits soignés</h2>
		<hr>
	</div>

	<div id="row_s2_m3_l6" class="row small-up-2 medium-up-3 large-up-6">
		<!-- javascript insertion -->
	</div>
	
	<div id="bornes_recharge" class="grid-x">
		<!-- javascript insertion -->
	</div>
	

	<hr>
	<div class="row">
		<div id="row_media-object" class="medium-4 columns">
			<h4>Top produits (M-1)</h4>
			<div class="media-object">
				<div class="media-object-section">
					<img class="thumbnail" src="http://placehold.it/100x100">
				</div>
				<div class="media-object-section">
					<h5>Nunc Eu Ullamcorper Orci</h5>
					<p>Quisque eget odio ac lectus vestibulum faucibus eget in
						metus. In pellentesque.</p>
				</div>
			</div>
			
			<div class="media-object">
				<div class="media-object-section">
					<img class="thumbnail" src="http://placehold.it/100x100">
				</div>
				<div class="media-object-section">
					<h5>Nunc Eu Ullamcorper Orci</h5>
					<p>Quisque eget odio ac lectus vestibulum faucibus eget in
						metus. In pellentesque.</p>
				</div>
			</div>
		</div>
		<div class="medium-4 columns">
			<h4>Top produits (M-2)</h4>
			<div class="media-object">
				<div class="media-object-section">
					<img class="thumbnail" src="http://placehold.it/100x100">
				</div>
				<div class="media-object-section">
					<h5>Nunc Eu Ullamcorper Orci</h5>
					<p>Quisque eget odio ac lectus vestibulum faucibus eget in
						metus. In pellentesque.</p>
				</div>
			</div>
			<div class="media-object">
				<div class="media-object-section">
					<img class="thumbnail" src="http://placehold.it/100x100">
				</div>
				<div class="media-object-section">
					<h5>Nunc Eu Ullamcorper Orci</h5>
					<p>Quisque eget odio ac lectus vestibulum faucibus eget in
						metus. In pellentesque.</p>
				</div>
			</div>
			<div class="media-object">
				<div class="media-object-section">
					<img class="thumbnail" src="http://placehold.it/100x100">
				</div>
				<div class="media-object-section">
					<h5>Nunc Eu Ullamcorper Orci</h5>
					<p>Quisque eget odio ac lectus vestibulum faucibus eget in
						metus. In pellentesque.</p>
				</div>
			</div>
		</div>
		<div class="medium-4 columns">
			<h4>Top produits (M-3)</h4>
			<div class="media-object">
				<div class="media-object-section">
					<img class="thumbnail" src=http://placehold.it/100x100>
				</div>
				<div class="media-object-section">
					<h5>Nunc Eu Ullamcorper Orci</h5>
					<p>Quisque eget odio ac lectus vestibulum faucibus eget in
						metus. In pellentesque.</p>
				</div>
			</div>
			<div class="media-object">
				<div class="media-object-section">
					<img class="thumbnail" src="http://placehold.it/100x100">
				</div>
				<div class="media-object-section">
					<h5>Nunc Eu Ullamcorper Orci</h5>
					<p>Quisque eget odio ac lectus vestibulum faucibus eget in
						metus. In pellentesque.</p>
				</div>
			</div>
			<div class="media-object">
				<div class="media-object-section">
					<img class="thumbnail" src="http://placehold.it/100x100">
				</div>
				<div class="media-object-section">
					<h5>Nunc Eu Ullamcorper Orci</h5>
					<p>Quisque eget odio ac lectus vestibulum faucibus eget in
						metus. In pellentesque.</p>
				</div>
			</div>
		</div>
	</div>

	<div class="callout large secondary">
		<div class="row">
			<div class="large-4 columns">
				<h5>Vivamus Hendrerit Arcu Sed Erat Molestie</h5>
				<p>Curabitur vulputate, ligula lacinia scelerisque tempor, lacus
					lacus ornare ante, ac egestas est urna sit amet arcu. Class aptent
					taciti sociosqu ad litora torquent per conubia nostra, per inceptos
					himenaeos. Sed molestie augue sit.</p>
			</div>
			<div class="large-3 large-offset-2 columns">
				<ul class="menu vertical">
					<li><a href="#">One</a></li>
					<li><a href="#">Two</a></li>
					<li><a href="#">Three</a></li>
					<li><a href="#">Four</a></li>
				</ul>
			</div>
			<div class="large-3 columns">
				<ul class="menu vertical">
					<li><a href="#">One</a></li>
					<li><a href="#">Two</a></li>
					<li><a href="#">Three</a></li>
					<li><a href="#">Four</a></li>
				</ul>
			</div>
		</div>
	</div>

	<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
	<script src="https://dhbhdrzi4tiry.cloudfront.net/cdn/sites/foundation.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/kitsu-core"></script>
	
	
	<script type="text/javascript">
	$(document).foundation();
    $(document).ready(function () {
    	 $.ajax({
             url: "https://dev.dev.interne.ocean.fr/ocean/restapi/borneRecharges/?customerId=1110000000232",
             type: "GET",
             contentType: "application/json",
             dataType: "json",
             async : true
         }).done(function (response) {
        	 console.log(response)
        	 $.each( kitsuCore.deattribute(response), function( i, item) {
        		 // HTML - Quelques autres produits soignés 
        		 var html = "<div class='cell'>";
        		 html = html.concat(Object.keys(item.idBorneRecharge) + ' ' + item.idBorneRecharge + ' ' + item.denomination + ' ' + item.adresse);
        		 html = html.concat("</div>");
     
				 // bornes de recharge
        		 $("#bornes_recharge").append(html);
        	});
	        	 $("#err").hide();
	             $("#suc").show();
	             $(".message").html("Bornes de recharge (GET => OK)");
          	 }).fail(function () {
                  $("#err").show();
                  $("#suc").hide();
                  $(".message").html("Unable to call the server");
             });
    	});
	</script>
	
	
	<script type="text/javascript">
		console.log(kitsuCore.camel('hello-world'));
	 	
		$(document).foundation();
        $(document).ready(function () {
        	 $.ajax({
                 url: "http://localhost:8081/products?page=1&size=20",
                 type: "GET",
                 contentType: "application/vnd.api+json",
                 dataType: "json",
                 async : true
             }).done(function (response) {
            	 console.log(response)
            	 
            	 let includes = response.included;
            	 console.log(includes)
            	 $.each( kitsuCore.deattribute(response.data), function( i, product) {
            		 let lang = undefined;
            		
            		 // relationship Json
            		 let relationship = product.relationships.productLangs.data.find(element => element.id.includes('fr'));
            		 if(relationship != undefined)
           			 {
            			 console.log(relationship)
            			 // Decomposition Json (produit FR)
            			 lang = kitsuCore.deattribute(kitsuCore.filterIncludes(includes, relationship));
                		 console.log(lang); 
           			 }

            		 // HTML - Nos produits les plus récents 
            		 var imageHtml = "<div class='column' style='min-height:370px'>";
            		 imageHtml = imageHtml.concat("<img class='thumbnail' src='".concat(product?.imageCover.href ,"'>"));
            		 imageHtml = imageHtml.concat(product?.reference || 'REFXXXXXXX');
            		 imageHtml = imageHtml.concat("<h5>", lang?.summary||'xxxxxxxxxx');
            		 imageHtml = imageHtml.concat("<p>", (typeof product.price === 'undefined') ? 0 : product.price, "€ (HT)</p>");
            		 imageHtml = imageHtml.concat("<a href='#' class='button expanded'>Acheter</a>");
            		 imageHtml = imageHtml.concat("</div>");
         			 
            		 // HTML - Quelques autres produits soignés 
            		 var imageHtmlHeight216 = "<div class='column product'>";
            		 imageHtmlHeight216 = imageHtmlHeight216.concat("<figure>");
            		 imageHtmlHeight216 = imageHtmlHeight216.concat("<img title='tirere' alt='erer' class='thumbnail' src='".concat(product.imageCover.href ,"' />"));
            		 imageHtmlHeight216 = imageHtmlHeight216.concat("<figcaption>Nulla At Nulla Justo, Eget</figcaption>");
            		 imageHtmlHeight216 = imageHtmlHeight216.concat("</figure>");
            		 imageHtmlHeight216 = imageHtmlHeight216.concat("<p>", (typeof product.price === 'undefined') ? 0 : product.price, "€ (HT)</p>");
            		 imageHtmlHeight216 = imageHtmlHeight216.concat("<a href='#' class='button small expanded hollow'>Acheter</a>");
            		 imageHtmlHeight216 = imageHtmlHeight216.concat("</div>");
         
					 // produit html 300x400
            		 $("#300_400").append(imageHtml);
            		 
            		 $("#row_s2_m3_l6").append(imageHtmlHeight216);

            	});
            	
               
             }).fail(function () { // fail ajax
                 
             });
        });
        
    </script>
</body>
</html>
